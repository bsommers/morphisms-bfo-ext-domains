version: '3.8'
services:
  neo4j:
    image: neo4j:5.12
    ports: ["7474:7474", "7687:7687"]
    environment: [NEO4J_AUTH=neo4j/password]
    healthcheck:
      test: ["CMD", "cypher-shell", "RETURN 1"]
      interval: 10s

  validator:
    build: 
      context: .
      dockerfile: Dockerfile.python
    depends_on:
      neo4j:
        condition: service_healthy
    volumes: ["./generated/python:/app/models"]
